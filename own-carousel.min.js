function debounce(fn,delay){let id=null;return function(args){clearTimeout(id),id=null,id=setTimeout((function(){fn.call(this,args)}),delay)}}function handleResize(){let windowWidth=window.innerWidth,flag=!1,crsContainer=document.querySelectorAll(".own-carousel__container");Array.from(crsContainer).forEach(item=>{for(let property in item.responsive)if(property>=windowWidth){item.itemPerRow=item.responsive[property][0],item.itemWidth=item.responsive[property][1],flag=!0;break}flag||(item.itemPerRow=item.itemPerRowBig,item.itemWidth=item.itemWidthBig),item.gapWidth=(100-item.itemPerRow*item.itemWidth)/(item.itemPerRow-1)||0,item.style.setProperty("--width",`${item.itemWidth}%`),item.style.setProperty("--margin",`${item.gapWidth}%`),item.imgWidth=item.carouselItem[0].getBoundingClientRect().width,item.step=item.imgWidth+item.gapWidth/item.itemWidth*item.imgWidth,item.moveSlide(0)})}Object.prototype.ownCarousel=function(options){const{itemPerRow:itemPerRow,itemWidth:itemWidth,loop:loop=!0,responsive:responsive={},draggable:draggable=!0,mousewheel:mousewheel=!1}=options;if(this.carousel=this.querySelector(".own-carousel"),this.carouselOuter=this.querySelector(".own-carousel__outer"),this.itemWidthBig=this.itemWidth=itemWidth,this.itemPerRowBig=this.itemPerRow=itemPerRow,this.responsive=responsive,this.gapWidth=(100-itemPerRow*itemWidth)/(itemPerRow-1)||0,this.style.setProperty("--width",`${itemWidth}%`),this.style.setProperty("--margin",`${this.gapWidth}%`),this.index=0,this.carouselItem=this.carousel.children,this.imgWidth=this.carouselItem[0].getBoundingClientRect().width,this.numberOfItem=this.carouselItem.length,this.step=this.imgWidth+this.gapWidth/this.itemWidth*this.imgWidth,loop){this.index=itemPerRow,this.carousel.style.transform=`translate3d(${-this.index*this.step}px,0,0)`;for(let i=0;i<this.itemPerRow;i++)this.carousel.insertAdjacentHTML("beforeend",this.carousel.children[i].outerHTML);let add="";for(let i=this.numberOfItem-this.itemPerRow;i<this.numberOfItem;i++)add+=this.carousel.children[i].outerHTML;this.carousel.insertAdjacentHTML("afterbegin",add)}if(this.translateSlide=()=>{this.carousel.style.transform=`translate3d(${-this.index*this.step}px,0,0)`},this.resetSlide=step=>{this.index+step<1&&(this.index=this.numberOfItem+1),this.index+step>=this.numberOfItem+this.itemPerRow&&(this.index=this.itemPerRow-1),this.carousel.style.transition="none",this.translateSlide(),setTimeout(()=>{this.carousel.style.transition="all 0.25s",this.index+=step,this.translateSlide()},20)},this.moveSlide=step=>{if(this.carousel.style.transition="all 0.25s",loop)this.index+step<1||this.index+step>=this.numberOfItem+this.itemPerRow?this.resetSlide(step):(this.index+=step,this.translateSlide());else{if(this.index+step<0||this.index+step>this.numberOfItem-this.itemPerRow)return;this.index+=step,this.translateSlide()}},this.querySelector(".control__prev").addEventListener("click",()=>{this.moveSlide(-1)}),this.querySelector(".control__next").addEventListener("click",()=>{this.moveSlide(1)}),draggable){let firstPos=currentPos=0,dragStartHandle=e=>{e.preventDefault(),this.carousel.style.transition="none","touchstart"===e.type?(currentPos=e.touches[0].clientX,document.addEventListener("touchmove",dragHandle),document.addEventListener("touchend",dragEndHandle)):(this.carouselOuter.style.cursor="grab",currentPos=e.clientX,document.addEventListener("mousemove",dragHandle),document.addEventListener("mouseup",dragEndHandle)),firstPos=currentPos},dragHandle=e=>{let currentMove=parseFloat(this.carousel.style.transform.slice(12)),currentIndex=-currentMove/this.step,distanceMoved=e.touches[0].clientX-currentPos||e.clientX-currentPos;loop?currentIndex<=0?(this.index=this.numberOfItem,this.translateSlide()):currentIndex>=this.numberOfItem+this.itemPerRow?(this.index=this.itemPerRow,this.translateSlide()):this.carousel.style.transform=`translate3d(${currentMove+distanceMoved}px,0,0)`:currentIndex<0||currentIndex>this.numberOfItem-this.itemPerRow?this.carousel.style.transform=`translate3d(${currentMove+distanceMoved/5}px,0,0)`:this.carousel.style.transform=`translate3d(${currentMove+distanceMoved}px,0,0)`,currentPos=e.touches[0].clientX||e.clientX};this.checkIndex=currentMove=>{let temp=currentMove;for(;temp>=this.step;)temp-=this.step;return temp>50&&firstPos-currentPos>0||this.step-temp<50&&firstPos-currentPos<0?Math.ceil(currentMove/this.step):Math.floor(currentMove/this.step)};let dragEndHandle=e=>{"touchend"===e.type?(document.removeEventListener("touchmove",dragHandle),document.removeEventListener("touchend",dragEndHandle)):(document.removeEventListener("mousemove",dragHandle),document.removeEventListener("mouseup",dragEndHandle),this.carouselOuter.style.cursor="auto");let currentMove=parseFloat(this.carousel.style.transform.slice(12));this.index=this.checkIndex(-currentMove),loop||(this.index>this.numberOfItem-this.itemPerRow&&(this.index=this.numberOfItem-this.itemPerRow),this.index<0&&(this.index=0)),this.carousel.style.transition="all 0.25s",this.translateSlide()};this.carouselOuter.addEventListener("mousedown",dragStartHandle),this.carouselOuter.addEventListener("touchstart",dragStartHandle)}mousewheel&&this.carouselOuter.addEventListener("mousewheel",e=>{e.deltaY>0?this.moveSlide(-1):this.moveSlide(1)})},window.addEventListener("resize",debounce(handleResize,500));